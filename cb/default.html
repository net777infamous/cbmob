<!DOCTYPE html>
<html>
<head>
    <title>Select Tags</title>
</head>
<body>
    <p>Select tags:</p>
    <input type="text" id="tagSearch" placeholder="Search tags">
    <ul id="tagList">
        <!-- Tags will be dynamically added here -->
    </ul>
    <button id="generateUrlButton" style="display: none;">Generate URL</button>

    <script>
        // Your array of tags
        let tagsArray = ["#default", "#favorites", "#18", "#19", "#asian", "#gaming", "#goth", "#gamer"];

        // Get the ul element where you want to add the tags
        const tagList = document.getElementById('tagList');

        // Get the search input element
        const tagSearchInput = document.getElementById('tagSearch');

        // Get the generate URL button element
        const generateUrlButton = document.getElementById('generateUrlButton');

        // Function to update the displayed tags based on the search input
        function updateTagList() {
            const searchQuery = tagSearchInput.value.toLowerCase();

            // Clear the current list
            tagList.innerHTML = '';

            // Filter and add matching tags to the list, excluding '#' and empty strings
            const filteredTags = tagsArray
                .filter(tag => tag !== '#' && tag.toLowerCase().includes(searchQuery))
                .sort((a, b) => {
                    if (a === '#default') return -1; // Ensure #default is at the top
                    if (b === '#default') return 1; // Ensure #default is at the top
                    if (a === '#favorites') return -1; // Ensure #favorites is at the top
                    if (b === '#favorites') return 1; // Ensure #favorites is at the top
                    return a.localeCompare(b);
                });

            filteredTags.forEach(tag => {
                const tagWithoutHash = tag.slice(1);

                const li = document.createElement('li');
                const checkbox = document.createElement('input');
                const a = document.createElement('a');

                checkbox.type = 'checkbox';
                checkbox.name = 'tags';
                checkbox.value = tagWithoutHash;

                a.textContent = tagWithoutHash;
                a.href = `https://net777infamous.github.io/cbmob/cb/ebony.html?tag=${tagWithoutHash}`;

                li.appendChild(checkbox);
                li.appendChild(a);
                tagList.appendChild(li);
            });

            // Add event listener to checkboxes
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateUrl);
            });
        }

        // Function to update the URL based on selected checkboxes
        function updateUrl() {
            const selectedCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            const selectedTags = Array.from(selectedCheckboxes).map(checkbox => checkbox.value);

            if (selectedTags.length > 0) {
                const tagParameters = selectedTags.map(tag => `tag=${tag}`).join('&');
                const url = `https://net777infamous.github.io/cbmob/cb/ebony.html?${tagParameters}`;
                generateUrlButton.style.display = 'block';
                generateUrlButton.href = url;
            } else {
                generateUrlButton.style.display = 'none';
            }
        }

        // Initial tag list
        updateTagList();

        // Add an event listener to the search input
        tagSearchInput.addEventListener('input', updateTagList);
        
        // Add an event listener to the Generate URL button
        generateUrlButton.addEventListener('click', function(event) {
            // Prevent the default behavior of the button (linking to the URL)
            event.preventDefault();
            
            // Get the generated URL
            const url = generateUrlButton.href;
            
            // Redirect to the generated URL
            window.location.href = url;
        });
    </script>
</body>
</html>
